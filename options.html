<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Shadow Intern Settings</title>
  <link rel="stylesheet" href="shared-styles.css">
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <!-- Top Header Bar -->
  <header class="header-bar">
    <div class="header-content">
      <div class="header-left">
        <div class="logo-container">
          <svg viewBox="0 0 64 64" class="logo-icon" aria-hidden="true">
            <path d="M8 24.5C8 22.7 8.7 21 10.1 19.9L27.9 6.9C29.1 5.9 30.9 5.9 32.1 6.9L49.9 19.9C51.3 21 52 22.7 52 24.5V39.5C52 41.3 51.3 43 49.9 44.1L32.1 57.1C30.9 58.1 29.1 58.1 27.9 57.1L10.1 44.1C8.7 43 8 41.3 8 39.5V24.5Z" fill="#16A34A"/>
            <path d="M16 32C16 31.3 16.4 30.6 17.1 30.1L26.8 23.4C28.2 22.4 29.8 22.4 31.2 23.4L40.9 30.1C41.6 30.6 42 31.3 42 32C42 32.7 41.6 33.4 40.9 33.9L31.2 40.6C29.8 41.6 28.2 41.6 26.8 40.6L17.1 33.9C16.4 33.4 16 32.7 16 32Z" fill="#ECFDF5"/>
            <circle cx="32" cy="32" r="9" fill="#022C22"/>
            <path d="M32 24L33.4 29.4L38.5 32L33.4 34.6L32 40L30.6 34.6L25.5 32L30.6 29.4L32 24Z" fill="#FFFFFF"/>
          </svg>
          <span class="header-title">Shadow Intern</span>
    </div>
      </div>
      <div class="header-right">
        <div class="license-status-pill" id="licenseStatusPill">INACTIVE</div>
        <div class="plan-label" id="planLabel">—</div>
        <div class="remaining-today" id="remainingToday">Remaining today: —</div>
      </div>
    </div>
  </header>

  <!-- Tab Navigation -->
  <nav class="tab-nav" id="tabNav">
    <button class="tab-btn active" data-tab="license">License</button>
    <button class="tab-btn" data-tab="reply">Reply</button>
    <button class="tab-btn" data-tab="personas">Personas</button>
    <button class="tab-btn" data-tab="advanced">Advanced</button>
  </nav>

  <!-- Main Content Container -->
  <div class="page-container">
    <!-- License Tab -->
    <div class="tab-content active" id="tab-license">
      <div class="card">
        <h2 class="card-title">License Key</h2>
        <div class="license-input-group">
          <input 
            type="text" 
            id="licenseKey" 
            class="license-input" 
            placeholder="shadow-XXXX-XXXX"
            autocomplete="off"
          />
          <button class="btn btn-primary" id="checkLicenseBtn">Check status</button>
        </div>
        <div class="license-status-inline" id="licenseStatusInline"></div>
        <div class="privacy-disclosure">
          <strong>Privacy Disclosure</strong>
          <p>This extension sends tweet text and attached media links to Shadow Intern API to generate replies. Your license key and usage data are stored locally. We do not track your browsing activity or collect personal information beyond what's necessary for the service.</p>
        </div>
      </div>
      </div>

    <!-- Reply Tab -->
    <div class="tab-content" id="tab-reply">
      <div class="card">
        <h2 class="card-title">Reply Settings</h2>
        
        <div class="form-group">
          <label for="tone">Tone</label>
          <select id="tone" class="form-control">
        <option value="neutral">Neutral</option>
        <option value="degen">Degen</option>
        <option value="professional">Professional</option>
        <option value="toxic">Toxic</option>
      </select>
        </div>

        <div class="form-group">
          <label>Reply Length</label>
          <div class="segmented-control" id="lengthControl">
            <button class="segment-btn" data-length="150">Short</button>
            <button class="segment-btn active" data-length="220">Medium</button>
            <button class="segment-btn" data-length="280">Long</button>
          </div>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="humanizeToggle" />
        <label for="humanizeToggle">Humanized Replies</label>
      </div>
      <div class="hint">Keep replies casual + degen. Disable for neutral AI vibes.</div>
        </div>

        <div class="form-group">
          <label for="maxChars">Max Characters</label>
          <div class="slider-group">
            <input 
              type="range" 
              id="maxCharsSlider" 
              class="slider" 
              min="50" 
              max="500" 
              step="10" 
              value="220"
            />
            <input 
              type="number" 
              id="maxChars" 
              class="slider-input" 
              min="50" 
              max="500" 
              step="10" 
              value="220"
            />
          </div>
          <div class="hint">Hard cap applied after generation. Range: 50-500 characters.</div>
        </div>

        <div class="form-group">
          <label>Preview</label>
          <div class="preview-box" id="previewBox">
            <div class="preview-placeholder">Preview will appear here based on your settings...</div>
          </div>
        </div>
      </div>

      <!-- Reply Modes Section -->
      <div class="card">
        <h2 class="card-title">Reply Modes</h2>
      <div class="hint">Toggle, rename, and customize the prompt template per mode.</div>
        <div class="modes-accordion" id="modesAccordion"></div>
      </div>
    </div>

    <!-- Personas Tab -->
    <div class="tab-content" id="tab-personas">
      <div class="card">
        <div class="card-header-flex">
          <h2 class="card-title">Custom Personas</h2>
          <button class="btn btn-secondary" id="addPersonaBtn" disabled>+ Add Persona</button>
        </div>
        <div class="hint">Create up to 3 custom personas for different reply styles.</div>
        <div class="personas-grid" id="personasGrid"></div>
      </div>
    </div>

    <!-- Advanced Tab -->
    <div class="tab-content" id="tab-advanced">
      <div class="card">
        <h2 class="card-title">Global Prompt</h2>
        <div class="form-group">
          <label for="generalPrompt">General Style / Persona Prompt</label>
          <textarea 
            id="generalPrompt" 
            class="form-control textarea-large" 
            placeholder="Example: Sarcastic crypto degen, short replies, uses CT slang, no emojis."
            rows="6"
          ></textarea>
          <div class="hint">This describes how Shadow Intern should talk in all replies (tone, slang, personality). Leave empty to use default style.</div>
        </div>
      </div>

      <div class="card">
        <h2 class="card-title">Settings Management</h2>
        <div class="form-group">
          <div class="button-group">
            <button class="btn btn-secondary" id="exportBtn">Export Settings</button>
            <button class="btn btn-secondary" id="importBtn">Import Settings</button>
            <input type="file" id="importFile" accept=".json" style="display: none;" />
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-danger" id="resetAllBtn">Reset All Settings</button>
          <div class="hint">This will reset all settings to defaults. This action cannot be undone.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sticky Footer -->
  <footer class="sticky-footer">
    <div class="footer-content">
      <div class="saved-indicator" id="savedIndicator"></div>
      <button class="btn btn-primary btn-large" id="saveBtn">Save changes</button>
    </div>
  </footer>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Confirm Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <h3 class="modal-title" id="modalTitle">Confirm</h3>
      <p class="modal-message" id="modalMessage"></p>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="modalCancel">Cancel</button>
        <button class="btn btn-danger" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
